<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,target-densitydpi=device-dpi" /> 

<title>Top Panel Test</title>

<style>
	@font-face{
		font-family: "RaphaelIcons";
		src: url('css/fonts/raphaelicons-webfont.ttf');
	}
</style>

<link rel="stylesheet" type="text/css" href="css/newStyle.css" />

 <!--jQuery-->
 <script language="JavaScript" src="js/jquery-1.7.2.min.js"></script>
 <!--jQuery END-->
 <script language="JavaScript" src="js/wavefancy.comm.js"></script>

<script>
	$(document).ready(function(){
		openPage(); // call page open animation
		
		
       	//focus then close
		$(".cl").focus(function(){
			$(this).val("");
		});

		//automaticall add answer list.
		$("#answer").blur(function(){
			if($(this).val() ==""){
				return;
			}
			
			var c = ' <div oID="-1" class="ndel Line"><span class="bLine" > '+$(this).val()+' <span class="RaphaelIcons textGray" style="display: inline-table;">Â</span></span></div>';
			$("#aList").append(c);
			$(this).val("");
			
			//rebine function
			$(".ndel").click(function(){
    			$(this).remove();
    		});
		});
		//remove item.
		$(".ndel").click(function(){
			$(this).remove();
		});
		
		$("#addItemBTN").click(function(){
			addNewItem();
			//getItemByID();
		});
	
	}); //----jQuery END-----//
	
	function addNewItem(){ //add or update.
		//	alert("here!");
			var q = new Object();
			q.id = $("#addItem").attr("dID"); //add negative add, alter positive id.
			q.question = $("#newItem1").val();
			
			q.options = [];
			
			$("#aList").children().each(function(){
				//alert($(this).text().trim().length);
				var s = $(this).text().trim();
				var o = new Object();
				o.option = s.substring(0,s.length-1);
				o.id = $(this).attr("oID");
		//		alert(s.substring(0,s.length-1));
				q.options.push(o);
			});	
		
			q.repeatType = "1";
			q.interval = $("#add_repeat").val();
			var t = $("#add_time").val().split(":");
			q.hour = t[0];
			q.minute = t[1];
			q.alertType = "1";
			alert(JSON.stringify(q));
			
			Android.processQuestion(JSON.stringify(q), "create")
	}
		
</script>
</head>
<body>
<div id="topPanel">

	<div id="topLine">
	<!-- 
		<div id="tl1"></div> <div id="tl2"></div> <div id="tl3"></div> <div id="tl4"></div> <div id="tl5"></div>
	 -->
	</div>
	<div id="move"></div>
	<!-- 添加提醒 panel  -->
					<section class="st-panel" id="st-panel-1">						
						<h3><span class="RaphaelIcons textGreen" style="display: inline-table;">E<span class="textOrange" style="margin-left:10px;">添加提醒</span></span></h3>
			<!-- ADD ITEM -->			
						<div id="addItem" dID="-1">
							<input id="newItem1" class="cInput cl" value="请添加提醒问题"/>
						    	<div style="text-align:right;">
						    		<div class="Line">
						    			<span class="bLine" style="width:50%;"> <input id="answer" class="lInput cl" value="请添加备选回答项"/> <span class="RaphaelIcons textGreen" style="display: inline-table;">@</span></span>
						    		</div>
						    	<div id="aList">	
						    		<div class="ndel Line" oID="-1">
						    		   	<span class="bLine" > 是 <span class="RaphaelIcons textGray" style="display: inline-table;">Â</span></span>
						    		</div>
						    		<div class="ndel Line" oID="-1">
						    		   	<span class="bLine" > 否 <span class="RaphaelIcons textGray" style="display: inline-table;">Â</span></span>
						    		</div>
						    	</div>
						    	
						    		<div class="Line">
						    			<span class="bLine" style="width:50%; height:30px;"> 重复周期 <input id="add_repeat" class="lInput" value="2" style="width:20px;color:#12AAEE;font-size:14px;"/> 天 <span class="RaphaelIcons textGreen" style="display: inline-table;">4</span></span>
						    		</div>
						    		<div class="Line">
						    			<span class="bLine" style="width:50%; height:30px;"> 提醒时间 <input id ="add_time" class="lInput" value="13:15" style="width:50px;color:#12AAEE;font-size:14px;"/><span class="RaphaelIcons textGreen" style="display: inline-table;">3</span></span>
						    		</div>
						    		
						    		<div class="bLine"></div>
						    		<div>
						    		  <span class="bLine" style="width:50%; height:30px;"><span class="RaphaelIcons textGreen" style="display: inline-table;">Ã</span>设置完成</span>
								      <input id="addItemBTN" class="button" type="button" value="确认添加条目"/>
								    </div>
						    	</div>
						    
						</div>
					</section>
				<!--END ADD ITEM -->	
</div>
</body>
</html>